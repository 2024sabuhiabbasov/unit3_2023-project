# login.kv

ScreenManager:
    LoginScreen:
        name: "LoginScreen"

    SignupScreen:
        name: "SignupScreen"

    HomeScreen:
        name: "HomeScreen"

    NewitemScreen:
        name: "NewitemScreen"

<LoginScreen>:
    size: 500, 500
    FitImage:
        source: "background.png"

    MDCard:
        size_hint: .5, .9
        elevation: 2
        orientation: "vertical"
        pos_hint: {"center_x": .5, "center_y": .5}
        padding: dp(50)
        md_bg_color: "#EEE9DA"

        MDLabel:
            font_name: "avenir_regular.ttf"
            text: "Login"
            font_size: 30
            size_hint: .3, .4
            halign: "center"
            pos_hint: {"center_x": .5, "center_y": .5}

        MDBoxLayout:
            orientation: "vertical"
            size_hint: 1, None
            height: dp(120)

            MDTextField:
                id: email_in
                hint_text: "Enter your email"
                icon_left: "email"
                helper_text_mode: "on_error"
                helper_text: "Please enter email"

            MDTextField:
                id: passwd_in
                hint_text: "Enter your password"
                icon_left: "key"
                password: not show_pass.active
                helper_text_mode: "on_error"
                helper_text: "Please enter password"

            MDBoxLayout:
                orientation: "horizontal"
                size_hint: 1, None
                height: dp(40)
                MDCheckbox:
                    id: show_pass
                    size_hint_x: 0.1
                    on_active: passwd_in.password = not self.active
                    active: False
                MDLabel:
                    text: "Show password"
                    font_name: "avenir_regular.ttf"
                    font_size: 18
                    size_hint_x: 0.7

        MDBoxLayout:
            orientation: "horizontal"
            size_hint: 1, .1

            MDRaisedButton:
                font_name: "avenir_regular.ttf"
                id: login
                text: "Login"
                on_press: root.try_login()
                size_hint: .3, .5
                md_bg_color: "#689ebd"

            MDLabel:
                font_name: "avenir_regular.ttf"
                size_hint: .3, 1

            MDRaisedButton:
                font_name: "avenir_regular.ttf"
                id: signup
                text: "Signup"
                on_press: app.root.current = "SignupScreen"
                size_hint: .3, .5
                md_bg_color: "#689ebd"

<SignupScreen>:
    size: 500, 500
    FitImage:
        source: "background.png"

    MDCard:
        size_hint: .5, .9
        elevation: 2
        orientation: "vertical"
        pos_hint: {"center_x": .5, "center_y": .5}
        padding: dp(50)
        md_bg_color: "#EEE9DA"

        MDLabel:
            font_name: "avenir_regular.ttf"
            text: "Signup"
            font_size: 30
            size_hint: 1, .2
            halign: "center"
            pos_hint: {"center_x": .5, "center_y": .5}

        MDTextField:
            id: uname
            #required: True
            hint_text: "Enter username"
            icon_left: "account"

        MDTextField:
            id: email
            #required: True
            hint_text: "Enter your email"
            icon_left: "email"

        MDTextField:
            id: e_passwd
            #required: True
            hint_text: "Enter password"
            icon_left: "key"
            password: True
            helper_text_mode: "on_focus"
            helper_text: "Password must be at least 8 characters"

        MDTextField:
            id: c_passwd
            #required: True
            hint_text: "Confirm password"
            icon_left: "key"
            password: True
            helper_text_mode: "on_error"
            helper_text: "Passwords don't match"


        MDBoxLayout:
            orientation: "horizontal"
            size_hint: 1, .1

            MDRaisedButton:
                font_name: "avenir_regular.ttf"
                id: signup_cancel
                text: "Cancel"
                on_press: root.try_cancel()
                size_hint: .3, .7
                md_bg_color: "#93BFCF"

            MDLabel:
                font_name: "avenir_regular.ttf"
                size_hint: .3, 1

            MDRaisedButton:
                font_name: "avenir_regular.ttf"
                id: signup
                text: "Submit"
                on_press: root.try_register()
                size_hint: .3, .7
                md_bg_color: "#689ebd"

<HomeScreen>:
    size: 500, 500

    FitImage:
        source: "background.png"

    MDCard:
        size_hint: .5, .9
        elevation: 2
        orientation: "vertical"
        pos_hint: {"center_x": .5, "center_y": .5}
        padding: dp(50)
        md_bg_color: "#EEE9DA"

        MDLabel:
            id: wlcm_msg
            text: "Welcome to tracker"
            font_name: "avenir_regular.ttf"
            font_size: 30
            size_hint: 1, .1
            halign: "center"

        MDBoxLayout:
            size_hint: 1, .9
            orientation: 'vertical'
            padding: dp(50)


            MDBoxLayout:
                size_hint: (1, .15)
                spacing: dp(40)
                orientation: "vertical"

                MDFillRoundFlatIconButton:
                    text: 'New item'
                    icon: 'plus-circle-outline'
                    pos_hint: {'center_x': .5}
                    md_bg_color: "#689ebd"
                    font_name: "avenir_regular.ttf"
                    on_press: root.try_newitem()

                MDFillRoundFlatIconButton:
                    text: 'Borrowed items list'
                    icon: 'format-list-bulleted'
                    pos_hint: {'center_x': .5}
                    md_bg_color: "#689ebd"
                    font_name: "avenir_regular.ttf"

                MDFillRoundFlatIconButton:
                    text: 'Log out'
                    icon: 'logout-variant'
                    pos_hint: {'center_x': .5}
                    on_press: app.root.current = 'LoginScreen'
                    md_bg_color: "#689ebd"
                    font_name: "avenir_regular.ttf"

<NewitemScreen>:
    size: 500, 500
    FitImage:
        source: "background.png"

    MDCard:
        size_hint: .5, .9
        elevation: 2
        orientation: "vertical"
        pos_hint: {"center_x": .5, "center_y": .5}
        md_bg_color: "#EEE9DA"


        MDBoxLayout:
            size_hint: 1, .1
            MDLabel:
                text: "New item"
                font_name: "avenir_regular.ttf"
                font_size: 30
                size_hint: 1, 1
                halign: "center"
                pos_hint: {"center_x": .5, "center_y": .3}

        MDLabel:
            size_hint: 1, .2

        MDBoxLayout:
            orientation: "vertical"
            size_hint: 1, .85
            padding: dp(30)

            MDTextField:
                id: customer_id
                hint_text: "Customer ID"
                icon_left: "account"
                on_text_validate: root.validate_customer_id(self.text)
                helper_text_mode: "on_error"
                helper_text: "Customer ID must be a number"

            MDTextField:
                id: date
                hint_text: "Date"
                icon_left: "calendar"
                multiline: False
                on_text_validate: root.validate_date(self.text)
                helper_text_mode: "on_error"
                helper_text: "Date must be in this format: dd-mm-YYYY"

            MDTextField:
                id: item
                hint_text: "Item"
                icon_left: "shopping"
                on_text_validate: root.validate_item(self.text)
                helper_text_mode: "on_error"
                helper_text: "Item must be one of these:\nSki, Snowboard, Ski shoes, Snowboard boots,\nSki clothes, Snowboard clothes"

            MDTextField:
                id: size
                hint_text: "Size"
                icon_left: "resize"
                on_text_validate: root.validate_size(self.text)
                helper_text_mode: "on_error"
                helper_text: "Size must be a number"

            MDTextField:
                id: item_id
                hint_text: "Item ID"
                icon_left: "barcode"
                on_text_validate: root.validate_item_id(self.text)
                helper_text_mode: "on_error"
                helper_text: "Item ID must be a number"

        MDBoxLayout:
            orientation: "horizontal"
            size_hint: .7, .1
            pos_hint: {"center_x": .5, "center_y": .5}

            MDRaisedButton:
                font_name: "avenir_regular.ttf"
                id: newitem_cancel
                text: "Cancel"
                on_press: app.root.current = 'HomeScreen'
                size_hint: .35, .7
                md_bg_color: "#689ebd"

            MDLabel:
                size_hint: .3, 1
                halign: "center"

            MDRaisedButton:
                font_name: "avenir_regular.ttf"
                id: newitem_submit
                text: "Submit"
                on_press: root.try_submit()
                size_hint: .35, .7
                md_bg_color: "#689ebd"

        MDLabel:
            size_hint: 1, .05


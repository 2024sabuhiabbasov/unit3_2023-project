ScreenManager:
    LoginScreen:
        name: "LoginScreen"

    SignupScreen:
        name: "SignupScreen"

    HomeScreen:
        name: "HomeScreen"

    NewitemScreen:
        name: "NewitemScreen"

    BorrowedItemsScreen:
        name: "BorrowedItemsScreen"

<LoginScreen>:
    size: 500, 500
    FitImage:
        source: "background.png"

    MDCard:
        size_hint: .5, .9
        elevation: 2
        orientation: "vertical"
        pos_hint: {"center_x": .5, "center_y": .5}
        padding: dp(50)
        md_bg_color: "#EEE9DA"

        MDLabel:
            font_name: "avenir_regular.ttf"
            text: "Login"
            font_size: 30
            size_hint: .3, .4
            halign: "center"
            pos_hint: {"center_x": .5, "center_y": .5}

        MDBoxLayout:
            orientation: "vertical"
            size_hint: 1, None
            height: dp(120)

            MDTextField:
                id: email_in
                hint_text: "Enter your email"
                icon_left: "email"
                helper_text_mode: "on_error"
                helper_text: "Please enter email"

            MDTextField:
                id: passwd_in
                hint_text: "Enter your password"
                icon_left: "key"
                password: not show_pass.active
                helper_text_mode: "on_error"
                helper_text: "Please enter password"

            MDBoxLayout:
                orientation: "horizontal"
                size_hint: 1, None
                height: dp(40)
                MDCheckbox:
                    id: show_pass
                    size_hint_x: 0.1
                    on_active: passwd_in.password = not self.active
                    active: False
                MDLabel:
                    text: "Show password"
                    font_name: "avenir_regular.ttf"
                    font_size: 18
                    size_hint_x: 0.7

        MDBoxLayout:
            orientation: "horizontal"
            size_hint: 1, .1

            MDRaisedButton:
                font_name: "avenir_regular.ttf"
                id: login
                text: "Login"
                on_press: root.try_login()
                size_hint: .3, .5
                md_bg_color: "#689ebd"

            MDLabel:
                font_name: "avenir_regular.ttf"
                size_hint: .3, 1

            MDRaisedButton:
                font_name: "avenir_regular.ttf"
                id: signup
                text: "Signup"
                on_press: root.try_signup()
                size_hint: .3, .5
                md_bg_color: "#689ebd"

<SignupScreen>:
    size: 500, 500
    FitImage:
        source: "background.png"

    MDCard:
        size_hint: .5, .9
        elevation: 2
        orientation: "vertical"
        pos_hint: {"center_x": .5, "center_y": .5}
        padding: dp(50)
        md_bg_color: "#EEE9DA"

        MDLabel:
            font_name: "avenir_regular.ttf"
            text: "Signup"
            font_size: 30
            size_hint: 1, .2
            halign: "center"
            pos_hint: {"center_x": .5, "center_y": .5}

        MDTextField:
            id: uname
            #required: True
            hint_text: "Enter username"
            icon_left: "account"
            helper_text_mode: "on_error"
            helper_text: "Please enter a username"

        MDTextField:
            id: email
            #required: True
            hint_text: "Enter your email"
            icon_left: "email"
            helper_text_mode: "on_error"
            helper_text: "Invalid email"

        MDTextField:
            id: e_passwd
            hint_text: "Enter password"
            icon_left: "key"
            password: True

        MDTextField:
            id: c_passwd
            #required: True
            hint_text: "Confirm password"
            icon_left: "key"
            password: True

        MDBoxLayout:
            orientation: "horizontal"
            size_hint: 1, .1

            MDRaisedButton:
                font_name: "avenir_regular.ttf"
                id: signup_cancel
                text: "Cancel"
                on_press: root.try_cancel()
                size_hint: .3, .7
                md_bg_color: "#93BFCF"

            MDLabel:
                font_name: "avenir_regular.ttf"
                size_hint: .3, 1

            MDRaisedButton:
                font_name: "avenir_regular.ttf"
                id: signup
                text: "Submit"
                on_press: root.try_register()
                size_hint: .3, .7
                md_bg_color: "#689ebd"

<HomeScreen>:
    size: 500, 500 # Set the size of the screen

    FitImage:
        source: "background.png" # Set the background image

    MDCard:
        size_hint: .5, .9 # Set the size of the card
        elevation: 2 # Set the elevation of the card
        orientation: "vertical" # Set the orientation of the card
        pos_hint: {"center_x": .5, "center_y": .5} # Center the card
        padding: dp(50) # Set the padding of the card
        md_bg_color: "#EEE9DA" # Set the background color of the card

        MDLabel:
            id: wlcm_msg
            text: "Welcome to tracker"
            font_name: "avenir_regular.ttf"
            font_size: 30
            size_hint: 1, .1
            halign: "center"

        MDBoxLayout:
            size_hint: 1, .9
            orientation: 'vertical'
            padding: dp(50)


            MDBoxLayout:
                size_hint: (1, .15)
                spacing: dp(40)
                orientation: "vertical"

                MDFillRoundFlatIconButton:
                    text: 'New item'
                    icon: 'plus-circle-outline'
                    pos_hint: {'center_x': .5}
                    md_bg_color: "#689ebd"
                    font_name: "avenir_regular.ttf"
                    on_press: root.try_newitem()

                MDFillRoundFlatIconButton:
                    text: 'Borrowed items list'
                    icon: 'format-list-bulleted'
                    pos_hint: {'center_x': .5}
                    md_bg_color: "#689ebd"
                    font_name: "avenir_regular.ttf"
                    on_release: app.root.current = "BorrowedItemsScreen"

                MDFillRoundFlatIconButton:
                    text: 'Log out'
                    icon: 'logout-variant'
                    pos_hint: {'center_x': .5}
                    on_press: root.try_logout()
                    md_bg_color: "#689ebd"
                    font_name: "avenir_regular.ttf"


<NewitemScreen>:
    size: 500, 500
    FitImage:
        source: "background.png"

    MDCard:
        size_hint: .5, .9
        elevation: 2
        orientation: "vertical"
        pos_hint: {"center_x": .5, "center_y": .5}
        md_bg_color: "#EEE9DA"

        MDLabel:
            text: "New item"
            font_name: "avenir_regular.ttf"
            font_size: 30
            size_hint: 1, .1
            halign: "center"
            pos_hint: {"center_x": .5, "center_y": .3}

        MDBoxLayout:
            orientation: "vertical"
            size_hint: 1, .85
            padding: dp(30)

            MDTextField:
                id: customer_id
                hint_text: "Customer ID"
                icon_left: "account"
                on_text_validate: root.validate_customer_id(self.text)
                helper_text_mode: "on_error"
                helper_text: "Customer ID must be a number"

            MDRectangleFlatButton:
                id: date_picker
                text: "Pick a date"
                on_release: root.show_date_picker()
                size_hint: 1, 1
                line_color: "#1183ad"
                text_color: "#1183ad"

            MDTextField:
                id: item
                hint_text: "Item"
                icon_left: "shopping"
                helper_text_mode: "on_error"
                helper_text: "Item must be one of these:\nSki, Snowboard, Ski shoes, Snowboard boots,\nSki clothes, Snowboard clothes"
            
            MDBoxLayout:
                orientation: "vertical"
                pos_hint: {"center_x": .5, "center_y": .5}

                MDLabel:
                    id: size_label
                    text: "Size: " + str(size.value)
                    size_hint_y: None
                    height: self.texture_size[1]
                    pos_hint: {"center_x": .5, "center_y": .5}

                MDSlider:
                    id: size
                    min: 16.5
                    max: 180
                    step: 0.5
                    hint: "Size"
                    icon: "resize"
                    size_hint_y: 1
                    humb_color_down: app.theme_cls.accent_color
                    hint_bg_color: "white"
                    helper_text_mode: "on_error"
                    helper_text: "Size must be a number"
                    pos_hint: {"center_x": .5, "center_y": .5}

            MDTextField:
                id: item_id
                hint_text: "Item ID"
                icon_left: "barcode"
                on_text_validate: root.validate_item_id(self.text)
                helper_text_mode: "on_error"
                helper_text: "Item ID must be a number"

        MDBoxLayout:
            orientation: "horizontal"
            size_hint: .7, .1
            pos_hint: {"center_x": .5, "center_y": .5}

            MDRaisedButton:
                font_name: "avenir_regular.ttf"
                id: newitem_cancel
                text: "Cancel"
                on_press: root.try_cancel()
                size_hint: .35, .7
                md_bg_color: "#689ebd"

            MDLabel:
                size_hint: .3, 1
                halign: "center"

            MDRaisedButton:
                font_name: "avenir_regular.ttf"
                id: newitem_submit
                text: "Submit"
                on_press: root.try_add()
                size_hint: .35, .7
                md_bg_color: "#689ebd"

        MDLabel:
            size_hint: 1, .05

<BorrowedItemsScreen>:
    size: 500, 500
    FitImage:
        source: "background.png"

    MDLabel:
        size_hint: 1, .9

    MDBoxLayout:
        size_hint: 1, .1
        orientation: "vertical"
        MDLabel:
            size_hint: 1, .05

        MDBoxLayout:
            orientation: "horizontal"
            size_hint: .5, .1
            pos_hint: {"center_x": .5, "center_y": .5}


            MDRaisedButton:
                id: return_home
                size_hint: .4, 1
                text: "Return home"
                on_press: app.root.current = "HomeScreen"
                pos_hint: {"center_x": .5, "center_y": .5}
                md_bg_color: "#689ebd"

            MDLabel:
                size_hint: .2, .1

            MDRaisedButton:
                id: delete
                size_hint: .4, 1
                text: "Delete"
                on_press: root.delete()
                pos_hint: {"center_x": .5, "center_y": .5}
                md_bg_color: "#689ebd"

        MDLabel:
            size_hint: 1, .1
